
-- xesteer HUB - Blox Fruits Auto Farm Script (Update 27 Compatible)
-- Compatible with PC/Mobile executors - Full W Azure Features

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local VirtualUser = game:GetService("VirtualUser")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local RootPart = Character:WaitForChild("HumanoidRootPart")

-- Anti-AFK System
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Advanced Configuration
local Config = {
    -- General Settings
    AutoFarm = false,
    AutoCollectItems = false,
    AutoQuest = false,
    AutoStats = false,
    AutoRaid = false,
    AutoSeaBeast = false,
    AutoBone = false,
    AutoCake = false,
    AutoFactory = false,
    AutoElite = false,
    AutoSwan = false,
    AutoDough = false,
    AutoMirror = false,
    AutoTrial = false,
    AutoMaterial = false,
    AutoSaber = false,
    AutoPole = false,
    AutoShark = false,
    AutoPiranha = false,
    AutoFish = false,
    AutoFishingRod = false,
    AutoLegendaryFish = false,
    AutoMythicalFish = false,
    AutoSeaEvent = false,
    AutoKitsune = false,
    AutoTushita = false,
    AutoYama = false,
    AutoBartilo = false,
    AutoRengoku = false,
    AutoSoulGuitar = false,
    AutoCursedDualKatana = false,
    AutoLeviathanHeart = false,
    AutoKrakenCore = false,
    AutoTideKeeper = false,
    AutoMegalodon = false,
    AutoGhostShip = false,
    AutoFrozenDimension = false,
    AutoMysticDroplet = false,
    
    -- Glitch Systems
    InfiniteEnergy = false,
    NoClip = false,
    WalkOnWater = false,
    FastAttack = false,
    WhiteScreen = false,
    RemoveFog = false,
    FullBright = false,
    InfiniteJump = false,
    SpeedGlitch = false,
    FlySpeed = 16,
    
    -- Farm Settings
    SafeMode = true,
    FarmDistance = 30,
    AttackDelay = 0.1,
    TweenSpeed = 350,
    BringMobDistance = 200,
    BypassTP = true,
    
    -- Stats
    SelectedStats = {
        Melee = false,
        Defense = false,
        Sword = false,
        Gun = false,
        Fruit = false
    },
    
    -- Weapon Selection
    SelectedWeapon = "Melee",
    AutoHaki = true,
    AutoBuso = true,
    AutoKen = true,
    
    -- Fishing Settings
    SelectedFishingRod = "Normal Fishing Rod",
    AutoBait = true,
    FishingDelay = 0.1,
    AutoSellFish = false,
    KeepLegendaryFish = true,
    KeepMythicalFish = true,
    
    -- Boss Settings
    SelectedBoss = "Fishman Lord",
    AutoBoss = false,
    
    -- Material Settings
    SelectedMaterial = "Leather",
    
    -- Sea Selection
    SelectedSea = "First Sea"
}

-- Utility Functions
local function GetDistance(pos1, pos2)
    return (pos1 - pos2).Magnitude
end

local function Tween(obj, info, goal)
    local tween = TweenService:Create(obj, info, goal)
    tween:Play()
    return tween
end

local function TeleportTo(position)
    if not position then return end
    
    if Config.BypassTP then
        -- Bypass Anti-Teleport
        local oldCFrame = RootPart.CFrame
        RootPart.CFrame = CFrame.new(position)
        wait(0.1)
        if (RootPart.Position - Vector3.new(position.X, position.Y, position.Z)).Magnitude > 50 then
            RootPart.CFrame = oldCFrame
            local info = TweenInfo.new(
                GetDistance(RootPart.Position, position) / Config.TweenSpeed,
                Enum.EasingStyle.Linear
            )
            Tween(RootPart, info, {CFrame = CFrame.new(position)}):Wait()
        end
    else
        local info = TweenInfo.new(
            GetDistance(RootPart.Position, position) / Config.TweenSpeed,
            Enum.EasingStyle.Linear
        )
        Tween(RootPart, info, {CFrame = CFrame.new(position)}):Wait()
    end
end

-- Advanced GUI System
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TitleLabel = Instance.new("TextLabel")
local TabContainer = Instance.new("ScrollingFrame")
local ContentContainer = Instance.new("Frame")
local NotificationFrame = Instance.new("Frame")

-- GUI Setup
ScreenGui.Name = "XesteerHub"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- Main Frame with Glass Effect
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BackgroundTransparency = 0.3
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
MainFrame.Size = UDim2.new(0, 700, 0, 500)
MainFrame.Active = true
MainFrame.Draggable = true

-- Glass Effect
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 15)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = Color3.fromRGB(255, 255, 255)
MainStroke.Transparency = 0.7
MainStroke.Thickness = 2
MainStroke.Parent = MainFrame

local MainGradient = Instance.new("UIGradient")
MainGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(20, 20, 20)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(10, 10, 10))
}
MainGradient.Parent = MainFrame

-- Title with Logo
TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.new(0, 0, 0, 0)
TitleLabel.Size = UDim2.new(1, 0, 0, 60)
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.Text = "⚡ xesteer HUB ⚡ | Blox Fruits Update 27"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextScaled = true

-- Enhanced Tab System
TabContainer.Name = "TabContainer"
TabContainer.Parent = MainFrame
TabContainer.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
TabContainer.BackgroundTransparency = 0.2
TabContainer.Position = UDim2.new(0, 10, 0, 70)
TabContainer.Size = UDim2.new(0, 160, 1, -80)
TabContainer.ScrollBarThickness = 4
TabContainer.CanvasSize = UDim2.new(0, 0, 0, 800)

local TabCorner = Instance.new("UICorner")
TabCorner.CornerRadius = UDim.new(0, 10)
TabCorner.Parent = TabContainer

-- Content Container
ContentContainer.Name = "ContentContainer"
ContentContainer.Parent = MainFrame
ContentContainer.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
ContentContainer.BackgroundTransparency = 0.1
ContentContainer.Position = UDim2.new(0, 180, 0, 70)
ContentContainer.Size = UDim2.new(1, -190, 1, -80)

local ContentCorner = Instance.new("UICorner")
ContentCorner.CornerRadius = UDim.new(0, 10)
ContentCorner.Parent = ContentContainer

-- Advanced Button Creation
local function CreateButton(parent, text, position, size, callback, color)
    color = color or Color3.fromRGB(60, 60, 60)
    
    local button = Instance.new("TextButton")
    button.Parent = parent
    button.BackgroundColor3 = color
    button.BorderSizePixel = 0
    button.Position = position
    button.Size = size
    button.Font = Enum.Font.Gotham
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextScaled = true
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(100, 100, 100)
    buttonStroke.Transparency = 0.8
    buttonStroke.Thickness = 1
    buttonStroke.Parent = button
    
    button.MouseButton1Click:Connect(callback)
    
    -- Enhanced Hover Effect
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(color.R + 20, color.G + 20, color.B + 20)}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = color}):Play()
    end)
    
    return button
end

-- Enhanced Toggle Creation
local function CreateToggle(parent, text, position, callback, defaultValue)
    defaultValue = defaultValue or false
    
    local frame = Instance.new("Frame")
    frame.Parent = parent
    frame.BackgroundTransparency = 1
    frame.Position = position
    frame.Size = UDim2.new(1, -20, 0, 45)
    
    local label = Instance.new("TextLabel")
    label.Parent = frame
    label.BackgroundTransparency = 1
    label.Position = UDim2.new(0, 0, 0, 0)
    label.Size = UDim2.new(0.65, 0, 1, 0)
    label.Font = Enum.Font.Gotham
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextScaled = true
    label.TextXAlignment = Enum.TextXAlignment.Left
    
    local toggle = Instance.new("TextButton")
    toggle.Parent = frame
    toggle.BackgroundColor3 = defaultValue and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(170, 0, 0)
    toggle.BorderSizePixel = 0
    toggle.Position = UDim2.new(0.7, 0, 0.15, 0)
    toggle.Size = UDim2.new(0, 80, 0.7, 0)
    toggle.Font = Enum.Font.GothamBold
    toggle.Text = defaultValue and "ON" or "OFF"
    toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggle.TextScaled = true
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 20)
    toggleCorner.Parent = toggle
    
    local isEnabled = defaultValue
    
    toggle.MouseButton1Click:Connect(function()
        isEnabled = not isEnabled
        local color = isEnabled and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(170, 0, 0)
        local text = isEnabled and "ON" or "OFF"
        
        TweenService:Create(toggle, TweenInfo.new(0.2), {BackgroundColor3 = color}):Play()
        toggle.Text = text
        callback(isEnabled)
    end)
    
    return toggle
end

-- Dropdown Creation
local function CreateDropdown(parent, text, position, options, callback)
    local frame = Instance.new("Frame")
    frame.Parent = parent
    frame.BackgroundTransparency = 1
    frame.Position = position
    frame.Size = UDim2.new(1, -20, 0, 45)
    
    local label = Instance.new("TextLabel")
    label.Parent = frame
    label.BackgroundTransparency = 1
    label.Position = UDim2.new(0, 0, 0, 0)
    label.Size = UDim2.new(0.4, 0, 1, 0)
    label.Font = Enum.Font.Gotham
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextScaled = true
    label.TextXAlignment = Enum.TextXAlignment.Left
    
    local dropdown = Instance.new("TextButton")
    dropdown.Parent = frame
    dropdown.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    dropdown.BorderSizePixel = 0
    dropdown.Position = UDim2.new(0.5, 0, 0.15, 0)
    dropdown.Size = UDim2.new(0.45, 0, 0.7, 0)
    dropdown.Font = Enum.Font.Gotham
    dropdown.Text = options[1] or "Select..."
    dropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
    dropdown.TextScaled = true
    
    local dropCorner = Instance.new("UICorner")
    dropCorner.CornerRadius = UDim.new(0, 8)
    dropCorner.Parent = dropdown
    
    return dropdown
end

-- Tab Creation System
local tabs = {}
local currentTab = nil

local function CreateTab(name, content, icon)
    icon = icon or "📋"
    
    local tabButton = CreateButton(TabContainer, icon .. " " .. name, 
        UDim2.new(0, 10, 0, #tabs * 50 + 10), 
        UDim2.new(1, -20, 0, 40), 
        function()
            if currentTab then
                currentTab.Visible = false
            end
            content.Visible = true
            currentTab = content
        end,
        Color3.fromRGB(50, 50, 50)
    )
    
    content.Parent = ContentContainer
    content.Visible = false
    content.BackgroundTransparency = 1
    content.Size = UDim2.new(1, 0, 1, 0)
    
    if content:IsA("ScrollingFrame") then
        content.ScrollBarThickness = 6
        content.CanvasSize = UDim2.new(0, 0, 0, 1000)
    end
    
    table.insert(tabs, {button = tabButton, content = content})
    
    if #tabs == 1 then
        content.Visible = true
        currentTab = content
    end
end

-- Main Farm Tab
local MainFarmTab = Instance.new("ScrollingFrame")
MainFarmTab.Name = "MainFarmTab"

CreateToggle(MainFarmTab, "Auto Farm Level", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoFarm = enabled
end)

CreateToggle(MainFarmTab, "Auto New World", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.AutoNewWorld = enabled
end)

CreateToggle(MainFarmTab, "Auto Third World", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.AutoThirdWorld = enabled
end)

CreateToggle(MainFarmTab, "Auto Katakuri", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.AutoKatakuri = enabled
end)

CreateToggle(MainFarmTab, "Auto Factory", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.AutoFactory = enabled
end)

-- Boss Farm Tab
local BossFarmTab = Instance.new("ScrollingFrame")
BossFarmTab.Name = "BossFarmTab"

CreateToggle(BossFarmTab, "Auto All Boss", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoBoss = enabled
end)

CreateToggle(BossFarmTab, "Auto Elite Hunter", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.AutoElite = enabled
end)

CreateToggle(BossFarmTab, "Auto Rip Indra", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.AutoRipIndra = enabled
end)

CreateToggle(BossFarmTab, "Auto Cake Prince", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.AutoCake = enabled
end)

CreateToggle(BossFarmTab, "Auto Dough King", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.AutoDough = enabled
end)

-- Item Farm Tab  
local ItemFarmTab = Instance.new("ScrollingFrame")
ItemFarmTab.Name = "ItemFarmTab"

CreateToggle(ItemFarmTab, "Auto Collect All Items", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoCollectItems = enabled
end)

CreateToggle(ItemFarmTab, "Auto Material", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.AutoMaterial = enabled
end)

CreateToggle(ItemFarmTab, "Auto Bone", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.AutoBone = enabled
end)

CreateToggle(ItemFarmTab, "Auto Ectoplasm", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.AutoEctoplasm = enabled
end)

CreateToggle(ItemFarmTab, "Auto Rainbow Haki", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.AutoRainbowHaki = enabled
end)

-- Fishing Tab (New Update 27)
local FishingTab = Instance.new("ScrollingFrame")
FishingTab.Name = "FishingTab"

CreateToggle(FishingTab, "Auto Fishing", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoFish = enabled
end)

CreateToggle(FishingTab, "Auto Fishing Rod", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.AutoFishingRod = enabled
end)

CreateToggle(FishingTab, "Auto Legendary Fish", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.AutoLegendaryFish = enabled
end)

CreateToggle(FishingTab, "Auto Mythical Fish", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.AutoMythicalFish = enabled
end)

CreateToggle(FishingTab, "Auto Use Bait", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.AutoBait = enabled
end)

CreateToggle(FishingTab, "Auto Sell Fish", UDim2.new(0, 10, 0, 285), function(enabled)
    Config.AutoSellFish = enabled
end)

CreateToggle(FishingTab, "Keep Legendary", UDim2.new(0, 10, 0, 340), function(enabled)
    Config.KeepLegendaryFish = enabled
end)

CreateToggle(FishingTab, "Keep Mythical", UDim2.new(0, 10, 0, 395), function(enabled)
    Config.KeepMythicalFish = enabled
end)

-- Sea Events Tab
local SeaEventTab = Instance.new("ScrollingFrame")
SeaEventTab.Name = "SeaEventTab"

CreateToggle(SeaEventTab, "Auto Sea Beast", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoSeaBeast = enabled
end)

CreateToggle(SeaEventTab, "Auto Leviathan Heart", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.AutoLeviathanHeart = enabled
end)

CreateToggle(SeaEventTab, "Auto Kraken Core", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.AutoKrakenCore = enabled
end)

CreateToggle(SeaEventTab, "Auto Tide Keeper", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.AutoTideKeeper = enabled
end)

CreateToggle(SeaEventTab, "Auto Megalodon", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.AutoMegalodon = enabled
end)

CreateToggle(SeaEventTab, "Auto Ghost Ship", UDim2.new(0, 10, 0, 285), function(enabled)
    Config.AutoGhostShip = enabled
end)

CreateToggle(SeaEventTab, "Auto Frozen Dimension", UDim2.new(0, 10, 0, 340), function(enabled)
    Config.AutoFrozenDimension = enabled
end)

CreateToggle(SeaEventTab, "Auto Mystic Droplet", UDim2.new(0, 10, 0, 395), function(enabled)
    Config.AutoMysticDroplet = enabled
end)

-- Raid Tab
local RaidTab = Instance.new("ScrollingFrame")
RaidTab.Name = "RaidTab"

CreateToggle(RaidTab, "Auto Raid", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoRaid = enabled
end)

CreateToggle(RaidTab, "Auto Next Island", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.AutoNextIsland = enabled
end)

CreateToggle(RaidTab, "Auto Awaken Fruit", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.AutoAwaken = enabled
end)

CreateToggle(RaidTab, "Auto Buy Chip", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.AutoBuyChip = enabled
end)

-- Stats Tab
local StatsTab = Instance.new("ScrollingFrame")
StatsTab.Name = "StatsTab"

CreateToggle(StatsTab, "Auto Stats", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.AutoStats = enabled
end)

CreateToggle(StatsTab, "Melee", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.SelectedStats.Melee = enabled
end)

CreateToggle(StatsTab, "Defense", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.SelectedStats.Defense = enabled
end)

CreateToggle(StatsTab, "Sword", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.SelectedStats.Sword = enabled
end)

CreateToggle(StatsTab, "Gun", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.SelectedStats.Gun = enabled
end)

CreateToggle(StatsTab, "Devil Fruit", UDim2.new(0, 10, 0, 285), function(enabled)
    Config.SelectedStats.Fruit = enabled
end)

-- Glitch/Exploit Tab
local GlitchTab = Instance.new("ScrollingFrame")
GlitchTab.Name = "GlitchTab"

CreateToggle(GlitchTab, "Fast Attack", UDim2.new(0, 10, 0, 10), function(enabled)
    Config.FastAttack = enabled
end)

CreateToggle(GlitchTab, "Infinite Energy", UDim2.new(0, 10, 0, 65), function(enabled)
    Config.InfiniteEnergy = enabled
end)

CreateToggle(GlitchTab, "No Clip", UDim2.new(0, 10, 0, 120), function(enabled)
    Config.NoClip = enabled
end)

CreateToggle(GlitchTab, "Walk on Water", UDim2.new(0, 10, 0, 175), function(enabled)
    Config.WalkOnWater = enabled
end)

CreateToggle(GlitchTab, "Infinite Jump", UDim2.new(0, 10, 0, 230), function(enabled)
    Config.InfiniteJump = enabled
end)

CreateToggle(GlitchTab, "Speed Glitch", UDim2.new(0, 10, 0, 285), function(enabled)
    Config.SpeedGlitch = enabled
end)

CreateToggle(GlitchTab, "Remove Fog", UDim2.new(0, 10, 0, 340), function(enabled)
    Config.RemoveFog = enabled
end)

CreateToggle(GlitchTab, "Full Bright", UDim2.new(0, 10, 0, 395), function(enabled)
    Config.FullBright = enabled
end)

-- Information Tab
local InformationTab = Instance.new("ScrollingFrame")
InformationTab.Name = "InformationTab"

-- Creator Info
local creatorFrame = Instance.new("Frame")
creatorFrame.Parent = InformationTab
creatorFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
creatorFrame.BackgroundTransparency = 0.2
creatorFrame.BorderSizePixel = 0
creatorFrame.Position = UDim2.new(0, 10, 0, 10)
creatorFrame.Size = UDim2.new(1, -20, 0, 120)

local creatorCorner = Instance.new("UICorner")
creatorCorner.CornerRadius = UDim.new(0, 10)
creatorCorner.Parent = creatorFrame

local creatorTitle = Instance.new("TextLabel")
creatorTitle.Parent = creatorFrame
creatorTitle.BackgroundTransparency = 1
creatorTitle.Position = UDim2.new(0, 10, 0, 5)
creatorTitle.Size = UDim2.new(1, -20, 0, 30)
creatorTitle.Font = Enum.Font.GothamBold
creatorTitle.Text = "📝 Script Information"
creatorTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
creatorTitle.TextScaled = true
creatorTitle.TextXAlignment = Enum.TextXAlignment.Left

local creatorName = Instance.new("TextLabel")
creatorName.Parent = creatorFrame
creatorName.BackgroundTransparency = 1
creatorName.Position = UDim2.new(0, 10, 0, 35)
creatorName.Size = UDim2.new(1, -20, 0, 25)
creatorName.Font = Enum.Font.Gotham
creatorName.Text = "👨‍💻 Creator: Xesteer_script"
creatorName.TextColor3 = Color3.fromRGB(0, 255, 100)
creatorName.TextScaled = true
creatorName.TextXAlignment = Enum.TextXAlignment.Left

local scriptName = Instance.new("TextLabel")
scriptName.Parent = creatorFrame
scriptName.BackgroundTransparency = 1
scriptName.Position = UDim2.new(0, 10, 0, 60)
scriptName.Size = UDim2.new(1, -20, 0, 25)
scriptName.Font = Enum.Font.Gotham
scriptName.Text = "⚡ Script: xesteer HUB - Blox Fruits"
scriptName.TextColor3 = Color3.fromRGB(255, 255, 0)
scriptName.TextScaled = true
scriptName.TextXAlignment = Enum.TextXAlignment.Left

local versionInfo = Instance.new("TextLabel")
versionInfo.Parent = creatorFrame
versionInfo.BackgroundTransparency = 1
versionInfo.Position = UDim2.new(0, 10, 0, 85)
versionInfo.Size = UDim2.new(1, -20, 0, 25)
versionInfo.Font = Enum.Font.Gotham
versionInfo.Text = "🔄 Version: Update 27 Compatible"
versionInfo.TextColor3 = Color3.fromRGB(100, 200, 255)
versionInfo.TextScaled = true
versionInfo.TextXAlignment = Enum.TextXAlignment.Left

-- Discord Info
local discordFrame = Instance.new("Frame")
discordFrame.Parent = InformationTab
discordFrame.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
discordFrame.BackgroundTransparency = 0.2
discordFrame.BorderSizePixel = 0
discordFrame.Position = UDim2.new(0, 10, 0, 140)
discordFrame.Size = UDim2.new(1, -20, 0, 100)

local discordCorner = Instance.new("UICorner")
discordCorner.CornerRadius = UDim.new(0, 10)
discordCorner.Parent = discordFrame

local discordTitle = Instance.new("TextLabel")
discordTitle.Parent = discordFrame
discordTitle.BackgroundTransparency = 1
discordTitle.Position = UDim2.new(0, 10, 0, 5)
discordTitle.Size = UDim2.new(1, -20, 0, 30)
discordTitle.Font = Enum.Font.GothamBold
discordTitle.Text = "💬 Join Our Discord Community!"
discordTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
discordTitle.TextScaled = true
discordTitle.TextXAlignment = Enum.TextXAlignment.Left

local discordLink = Instance.new("TextLabel")
discordLink.Parent = discordFrame
discordLink.BackgroundTransparency = 1
discordLink.Position = UDim2.new(0, 10, 0, 35)
discordLink.Size = UDim2.new(0.6, 0, 0, 25)
discordLink.Font = Enum.Font.Gotham
discordLink.Text = "🔗 discord.gg/xesteer"
discordLink.TextColor3 = Color3.fromRGB(255, 255, 255)
discordLink.TextScaled = true
discordLink.TextXAlignment = Enum.TextXAlignment.Left

CreateButton(discordFrame, "📋 Copy Discord Link", UDim2.new(0.65, 0, 0.4, 0), UDim2.new(0.3, 0, 0.5, 0), function()
    setclipboard("https://discord.gg/xesteer")
    ShowNotification("🔗 Discord link copied to clipboard!", 3)
end, Color3.fromRGB(255, 255, 255))

-- Features Info
local featuresFrame = Instance.new("Frame")
featuresFrame.Parent = InformationTab
featuresFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
featuresFrame.BackgroundTransparency = 0.2
featuresFrame.BorderSizePixel = 0
featuresFrame.Position = UDim2.new(0, 10, 0, 250)
featuresFrame.Size = UDim2.new(1, -20, 0, 200)

local featuresCorner = Instance.new("UICorner")
featuresCorner.CornerRadius = UDim.new(0, 10)
featuresCorner.Parent = featuresFrame

local featuresTitle = Instance.new("TextLabel")
featuresTitle.Parent = featuresFrame
featuresTitle.BackgroundTransparency = 1
featuresTitle.Position = UDim2.new(0, 10, 0, 5)
featuresTitle.Size = UDim2.new(1, -20, 0, 25)
featuresTitle.Font = Enum.Font.GothamBold
featuresTitle.Text = "🔥 Script Features"
featuresTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
featuresTitle.TextScaled = true
featuresTitle.TextXAlignment = Enum.TextXAlignment.Left

local featuresList = {
    "⚔️ Complete Auto Farm System",
    "👑 All Boss Auto Hunting",
    "🎣 Advanced Fishing System (Update 27)",
    "🌊 Auto Sea Beast & Events",
    "💎 Auto Item Collection",
    "📊 Auto Stats Distribution",
    "🔥 Advanced Glitch Systems",
    "📱 PC & Mobile Compatible"
}

for i, feature in ipairs(featuresList) do
    local featureLabel = Instance.new("TextLabel")
    featureLabel.Parent = featuresFrame
    featureLabel.BackgroundTransparency = 1
    featureLabel.Position = UDim2.new(0, 10, 0, 25 + (i * 20))
    featureLabel.Size = UDim2.new(1, -20, 0, 18)
    featureLabel.Font = Enum.Font.Gotham
    featureLabel.Text = feature
    featureLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    featureLabel.TextScaled = true
    featureLabel.TextXAlignment = Enum.TextXAlignment.Left
end

-- Settings Tab
local SettingsTab = Instance.new("ScrollingFrame")
SettingsTab.Name = "SettingsTab"

CreateButton(SettingsTab, "Destroy GUI", UDim2.new(0, 10, 0, 10), UDim2.new(0, 200, 0, 40), function()
    ScreenGui:Destroy()
end, Color3.fromRGB(170, 0, 0))

CreateButton(SettingsTab, "Rejoin Server", UDim2.new(0, 220, 0, 10), UDim2.new(0, 200, 0, 40), function()
    TeleportService:Teleport(game.PlaceId)
end, Color3.fromRGB(0, 100, 170))

CreateButton(SettingsTab, "Server Hop", UDim2.new(0, 10, 0, 60), UDim2.new(0, 200, 0, 40), function()
    local servers = {}
    local req = game:HttpGet("https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?sortOrder=Asc&limit=100")
    local body = HttpService:JSONDecode(req)
    for i,v in next, body.data do
        if v.playing < v.maxPlayers and v.id ~= game.JobId then
            servers[#servers+1] = v.id
        end
    end
    TeleportService:TeleportToPlaceInstance(game.PlaceId, servers[math.random(1,#servers)])
end, Color3.fromRGB(0, 170, 100))

-- Create all tabs
CreateTab("Farm", MainFarmTab, "🚜")
CreateTab("Boss", BossFarmTab, "👑") 
CreateTab("Items", ItemFarmTab, "💎")
CreateTab("Fishing", FishingTab, "🎣")
CreateTab("Sea", SeaEventTab, "🌊")
CreateTab("Raid", RaidTab, "⚔️")
CreateTab("Stats", StatsTab, "📊")
CreateTab("Glitch", GlitchTab, "🔥")
CreateTab("Information", InformationTab, "ℹ️")
CreateTab("Settings", SettingsTab, "⚙️")

-- Advanced Combat System
local function EquipWeapon()
    for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
        if tool:IsA("Tool") then
            if Config.SelectedWeapon == "Melee" and tool.ToolTip == "Melee" then
                Humanoid:EquipTool(tool)
                break
            elseif Config.SelectedWeapon == "Sword" and tool.ToolTip == "Sword" then  
                Humanoid:EquipTool(tool)
                break
            elseif Config.SelectedWeapon == "Gun" and tool.ToolTip == "Gun" then
                Humanoid:EquipTool(tool)
                break
            end
        end
    end
end

local function ActivateHaki()
    if Config.AutoHaki then
        ReplicatedStorage.Remotes.CommF_:InvokeServer("Buso")
    end
    if Config.AutoKen then
        ReplicatedStorage.Remotes.CommF_:InvokeServer("Ken", true)
    end
end

local function GetClosestEnemy()
    local closestEnemy = nil
    local shortestDistance = Config.FarmDistance
    
    for _, obj in pairs(Workspace.Enemies:GetChildren()) do
        if obj:FindFirstChild("Humanoid") and obj:FindFirstChild("HumanoidRootPart") and obj.Humanoid.Health > 0 then
            local distance = GetDistance(RootPart.Position, obj.HumanoidRootPart.Position)
            if distance < shortestDistance then
                closestEnemy = obj
                shortestDistance = distance
            end
        end
    end
    
    return closestEnemy
end

local function AttackEnemy(enemy)
    if not enemy or not enemy:FindFirstChild("HumanoidRootPart") then return end
    
    EquipWeapon()
    ActivateHaki()
    
    -- Fast Attack System
    if Config.FastAttack then
        local args = {
            [1] = 1,
            [2] = enemy.HumanoidRootPart,
            [3] = 1,
            [4] = enemy.HumanoidRootPart.Position
        }
        
        pcall(function()
            ReplicatedStorage.Remotes.CommF_:InvokeServer(unpack(args))
        end)
        
        -- Additional attack methods
        ReplicatedStorage.Remotes.CommF_:InvokeServer("weaponkill", enemy.HumanoidRootPart)
        game:GetService("VirtualUser"):CaptureController()
        game:GetService("VirtualUser"):Button1Down(Vector2.new(0,1,0,1))
    else
        wait(Config.AttackDelay)
    end
end

-- Advanced Fishing System (Update 27)
local fishingSpots = {
    ["First Sea"] = {
        Vector3.new(1037, 125, -1440),
        Vector3.new(-1800, 138, 1608),
        Vector3.new(-2604, 138, 1750)
    },
    ["Second Sea"] = {
        Vector3.new(928, 125, 32859),
        Vector3.new(-710, 125, 32859),
        Vector3.new(2128, 125, 33265)
    },
    ["Third Sea"] = {
        Vector3.new(-10238, 332, -10549),
        Vector3.new(-5405, 332, -5513),
        Vector3.new(-12400, 332, -7803)
    }
}

local fishingRods = {
    "Fishing Rod",
    "Pro Fisher",
    "Carbon Rod",
    "Mythical Rod",
    "Fast Rod",
    "Rocket Fishing Rod"
}

local function EquipFishingRod()
    for _, rod in pairs(fishingRods) do
        local tool = LocalPlayer.Backpack:FindFirstChild(rod)
        if tool then
            Humanoid:EquipTool(tool)
            return true
        end
    end
    return false
end

local function GetBestFishingSpot()
    local currentSea = Config.SelectedSea or "Third Sea"
    local spots = fishingSpots[currentSea] or fishingSpots["Third Sea"]
    
    local closestSpot = spots[1]
    local shortestDistance = GetDistance(RootPart.Position, spots[1])
    
    for _, spot in pairs(spots) do
        local distance = GetDistance(RootPart.Position, spot)
        if distance < shortestDistance then
            closestSpot = spot
            shortestDistance = distance
        end
    end
    
    return closestSpot
end

local function AutoFishing()
    if not Config.AutoFish then return end
    
    pcall(function()
        if not EquipFishingRod() then
            return
        end
        
        local fishingSpot = GetBestFishingSpot()
        if fishingSpot then
            TeleportTo(fishingSpot)
            
            -- Cast fishing line
            local tool = Character:FindFirstChildOfClass("Tool")
            if tool and tool.Name:find("Rod") then
                -- Use bait if available and enabled
                if Config.AutoBait then
                    pcall(function()
                        ReplicatedStorage.Remotes.CommF_:InvokeServer("FishingBait", "Worm")
                    end)
                end
                
                -- Start fishing
                tool:Activate()
                
                -- Wait for fish and auto-catch
                wait(math.random(3, 8))
                
                -- Auto catch fish
                ReplicatedStorage.Remotes.CommF_:InvokeServer("FishingCatch")
                
                wait(Config.FishingDelay)
            end
        end
    end)
end

local function AutoSellFish()
    if not Config.AutoSellFish then return end
    
    pcall(function()
        -- Teleport to fish seller
        local fishSeller = Vector3.new(-10238, 332, -10549) -- Third Sea location
        TeleportTo(fishSeller)
        
        wait(1)
        
        -- Sell all fish except legendary/mythical if keeping them
        for _, item in pairs(LocalPlayer.Backpack:GetChildren()) do
            if item.Name:find("Fish") then
                local isLegendary = item.Name:find("Legendary") or item:GetAttribute("Rarity") == "Legendary"
                local isMythical = item.Name:find("Mythical") or item:GetAttribute("Rarity") == "Mythical"
                
                if not (Config.KeepLegendaryFish and isLegendary) and not (Config.KeepMythicalFish and isMythical) then
                    ReplicatedStorage.Remotes.CommF_:InvokeServer("SellFish", item.Name)
                end
            end
        end
    end)
end

local function AutoSeaEvents()
    if not Config.AutoSeaBeast then return end
    
    pcall(function()
        -- Check for sea events
        local seaBeasts = {}
        
        for _, obj in pairs(Workspace.SeaBeasts:GetChildren()) do
            if obj:FindFirstChild("Humanoid") and obj.Humanoid.Health > 0 then
                table.insert(seaBeasts, obj)
            end
        end
        
        -- Hunt Leviathan
        if Config.AutoLeviathanHeart then
            for _, beast in pairs(seaBeasts) do
                if beast.Name:find("Leviathan") then
                    TeleportTo(beast.HumanoidRootPart.Position + Vector3.new(0, 50, 0))
                    AttackEnemy(beast)
                    break
                end
            end
        end
        
        -- Hunt Kraken
        if Config.AutoKrakenCore then
            for _, beast in pairs(seaBeasts) do
                if beast.Name:find("Kraken") then
                    TeleportTo(beast.HumanoidRootPart.Position + Vector3.new(0, 50, 0))
                    AttackEnemy(beast)
                    break
                end
            end
        end
        
        -- Hunt Megalodon
        if Config.AutoMegalodon then
            for _, beast in pairs(seaBeasts) do
                if beast.Name:find("Megalodon") then
                    TeleportTo(beast.HumanoidRootPart.Position + Vector3.new(0, 20, 0))
                    AttackEnemy(beast)
                    break
                end
            end
        end
    end)
end

-- Advanced Farm Functions
local function AutoFarmLevel()
    if not Config.AutoFarm then return end
    
    pcall(function()
        local enemy = GetClosestEnemy()
        if enemy then
            -- Position behind enemy for optimal farming
            local enemyPos = enemy.HumanoidRootPart.Position
            local behindPos = enemyPos - enemy.HumanoidRootPart.CFrame.LookVector * 7
            behindPos = Vector3.new(behindPos.X, enemyPos.Y, behindPos.Z)
            
            TeleportTo(behindPos)
            AttackEnemy(enemy)
        end
    end)
end

local function AutoBossHunt()
    if not Config.AutoBoss then return end
    
    pcall(function()
        for _, boss in pairs(ReplicatedStorage:FindFirstChild("Enemies"):GetChildren()) do
            if boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                TeleportTo(boss.HumanoidRootPart.Position)
                AttackEnemy(boss)
                break
            end
        end
    end)
end

local function AutoCollectItems()
    if not Config.AutoCollectItems then return end
    
    pcall(function()
        for _, item in pairs(Workspace:GetChildren()) do
            if item.Name:find("Fruit") or item.Name:find("Chest") or item.Name == "Money" then
                if item:FindFirstChild("Handle") or item:FindFirstChild("Root") then
                    local itemPos = item:FindFirstChild("Handle") and item.Handle.Position or item.Root.Position
                    TeleportTo(itemPos)
                    wait(0.5)
                end
            end
        end
    end)
end

local function AutoStats()
    if not Config.AutoStats then return end
    
    pcall(function()
        for statName, enabled in pairs(Config.SelectedStats) do
            if enabled then
                ReplicatedStorage.Remotes.CommF_:InvokeServer("AddPoint", statName, 1)
            end
        end
    end)
end

-- Glitch Systems
local function InfiniteEnergyGlitch()
    if Config.InfiniteEnergy then
        LocalPlayer.Character.Energy.Value = LocalPlayer.Character.Energy.MaxValue
    end
end

local function NoClipGlitch()
    if Config.NoClip then
        for _, part in pairs(LocalPlayer.Character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end

local function WalkOnWaterGlitch()
    if Config.WalkOnWater then
        pcall(function()
            if Workspace:FindFirstChild("Water") then
                Workspace.Water.CanCollide = true
            end
        end)
    end
end

local function SpeedGlitch()
    if Config.SpeedGlitch then
        Humanoid.WalkSpeed = 100
    else
        Humanoid.WalkSpeed = 16
    end
end

local function RemoveFog()
    if Config.RemoveFog then
        game.Lighting.FogEnd = 100000
        game.Lighting.FogStart = 0
    end
end

local function FullBright()
    if Config.FullBright then
        game.Lighting.Brightness = 2
        game.Lighting.ClockTime = 14
        game.Lighting.GlobalShadows = false
    end
end

-- Main Loop System
local connections = {}

connections.MainLoop = RunService.Heartbeat:Connect(function()
    pcall(function()
        AutoFarmLevel()
        AutoBossHunt() 
        AutoCollectItems()
        AutoFishing()
        AutoSeaEvents()
        AutoStats()
        InfiniteEnergyGlitch()
        NoClipGlitch()
        WalkOnWaterGlitch()
        SpeedGlitch()
        RemoveFog()
        FullBright()
    end)
end)

-- Separate fishing loop for better performance
connections.FishingLoop = RunService.Heartbeat:Connect(function()
    pcall(function()
        if Config.AutoSellFish then
            AutoSellFish()
        end
    end)
end)

-- Character Respawn Handler
LocalPlayer.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    Humanoid = Character:WaitForChild("Humanoid")
    RootPart = Character:WaitForChild("HumanoidRootPart")
    
    -- Reapply glitches on respawn
    wait(1)
    SpeedGlitch()
end)

-- Window Controls
local CloseButton = Instance.new("TextButton")
CloseButton.Parent = MainFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
CloseButton.BorderSizePixel = 0
CloseButton.Position = UDim2.new(1, -35, 0, 5)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "✕"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextScaled = true

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 15)
closeCorner.Parent = CloseButton

CloseButton.MouseButton1Click:Connect(function()
    -- Cleanup connections
    for _, connection in pairs(connections) do
        connection:Disconnect()
    end
    ScreenGui:Destroy()
end)

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Parent = MainFrame
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Position = UDim2.new(1, -70, 0, 5)
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "—"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextScaled = true

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 15)
minimizeCorner.Parent = MinimizeButton

local isMinimized = false
MinimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    local targetSize = isMinimized and UDim2.new(0, 700, 0, 60) or UDim2.new(0, 700, 0, 500)
    
    TweenService:Create(MainFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quart), {Size = targetSize}):Play()
    
    TabContainer.Visible = not isMinimized
    ContentContainer.Visible = not isMinimized
end)

-- Notification System
local function ShowNotification(message, duration)
    duration = duration or 3
    
    local notification = Instance.new("Frame")
    notification.Parent = ScreenGui
    notification.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    notification.BackgroundTransparency = 0.3
    notification.BorderSizePixel = 0
    notification.Position = UDim2.new(1, 10, 0, 100)
    notification.Size = UDim2.new(0, 300, 0, 80)
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 10)
    notifCorner.Parent = notification
    
    local notifStroke = Instance.new("UIStroke")
    notifStroke.Color = Color3.fromRGB(0, 170, 0)
    notifStroke.Thickness = 2
    notifStroke.Parent = notification
    
    local notifText = Instance.new("TextLabel")
    notifText.Parent = notification
    notifText.BackgroundTransparency = 1
    notifText.Size = UDim2.new(1, 0, 1, 0)
    notifText.Font = Enum.Font.Gotham
    notifText.Text = message
    notifText.TextColor3 = Color3.fromRGB(255, 255, 255)
    notifText.TextScaled = true
    notifText.TextWrapped = true
    
    -- Animate in
    TweenService:Create(notification, TweenInfo.new(0.5), {Position = UDim2.new(1, -310, 0, 100)}):Play()
    
    -- Auto remove
    wait(duration)
    TweenService:Create(notification, TweenInfo.new(0.5), {Position = UDim2.new(1, 10, 0, 100)}):Play()
    wait(0.5)
    notification:Destroy()
end

-- Initialize
spawn(function()
    ShowNotification("⚡ xesteer HUB loaded successfully!", 5)
    wait(2)
    ShowNotification("🎮 All Update 27 features activated!", 3)
    wait(2)  
    ShowNotification("🔥 Glitch systems ready!", 3)
end)

print("⚡ xesteer HUB - Complete Blox Fruits Script Update 27")
print("📋 Features: All Auto Farms, Boss Hunting, Fishing System, Sea Events, Raids")
print("🎣 Fishing: Auto Rod, Auto Legendary/Mythical Fish, Auto Bait, Auto Sell")
print("🌊 Sea Events: Leviathan Heart, Kraken Core, Megalodon, Tide Keeper, Ghost Ship")
print("🔥 Glitch Systems: Fast Attack, Infinite Energy, No Clip, Speed")
print("⚡ Compatible with PC and Mobile executors")
print("🎯 Update 27 Compatible - Complete Fishing & Sea Beast System")
